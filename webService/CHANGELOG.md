# 更新日志 (CHANGELOG)

所有对项目的显著更改都将记录在此文件中。

## [1.0.0] - 2023-03-29

### 新功能 (New Features)

- 实现数据源管理功能
  - 创建、查询、更新和删除数据源
  - 数据源连接测试
  - 支持MySQL数据库类型
- 实现查询执行功能
  - SQL查询执行
  - 查询结果展示
  - 查询历史记录
- 实现元数据查询功能
  - 数据库表结构查询
  - 数据库字段信息查询
  - 数据库关系查询
- 实现查询管理功能
  - 保存查询
  - 管理查询历史
- 添加API文档 (Swagger)
- 健康检查接口

### 修复 (Fixes)

- 修复了错误处理中间件类型问题
- 修复了数据源服务中的类型错误
- 修复了Swagger文档配置问题
- 修复了数据库databaseName与database字段不一致问题
- 密码加密存储问题的修复

### 变更 (Changes)

- 改进了数据源密码的安全处理
- 更新了API错误处理机制
- 改进了查询执行服务的性能
- 调整了中间件结构

### 安全 (Security)

- 增强了错误处理机制，防止敏感信息泄露
- 实现了数据源密码的加密存储
- 添加了请求验证和参数校验

## [1.0.1] - 2023-03-30

### 新功能 (New Features)

- 实现元数据同步功能
  - 支持全量和增量同步
  - 可配置同步的schema和表范围
  - 记录同步历史
  - 同步表、视图、列和关系信息
- 实现元数据结构查询功能
  - 获取完整的数据源元数据结构
  - 支持表数据预览
  - 查询同步历史
- 优化元数据API路由设计
  - 简化路由结构
  - 添加详细参数验证

### 修复 (Fixes)

- 修复了元数据控制器中的类型错误
- 修复了元数据路由中的验证问题
- 修复了数据源连接器接口不一致问题

### 变更 (Changes)

- 重构了元数据服务的API设计
- 优化了同步性能和错误处理
- 改进了元数据存储结构

## [未发布]

### 修复 (Fixes)

- 修复了TypeScript编译错误，统一了接口定义
  - 添加了`encryptPassword`和`comparePassword`函数作为现有加密函数的别名
  - 在`dbInterface.ts`中添加了`IDatabaseConnector`类型作为`DatabaseConnector`的别名
  - 修复了`MySQLConnector`构造函数的重载问题，支持两种不同的参数格式
  - 完善了`datasource.service.ts`中对模拟数据的类型定义
  - 改进了错误处理，确保类型兼容性
- 修复了`metadata.service.ts`中的字段名和类型不匹配问题
  - 将接口属性名与Prisma模型属性名对齐
  - 修复了表关系创建时使用了不存在的属性
  - 调整了外键关系的处理逻辑
  - 确保了与Prisma模型的类型兼容性

### 变更 (Changes)

- 优化了项目结构，确保了代码的类型安全
- 添加了类型定义文件`datasource.ts`，定义了所有数据源相关的DTO接口
- 重构了数据库连接器的实现，提高了代码的可维护性和类型安全性
- 优化了模拟数据模式，方便开发和测试

### 待实现功能

- 用户认证和授权
- 数据可视化功能
- 数据导出功能
- 定时查询功能
- 完整的测试用例
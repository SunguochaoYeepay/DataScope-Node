# 变更日志

## [未发布]

### 新增
- 查询历史页面自动加载数据
- 查询历史页面过滤掉临时查询，只显示已保存的查询
- 优化查询结果处理逻辑，支持处理各种后端API返回格式
  - 增强对嵌套数据结构的处理能力
  - 正确识别并处理带有 fields 字段的查询结果
  - 支持 API 标准包装格式 (success + data)
- 修复顶部导航"查询"链接指向问题，确保链接到查询历史页面

### 优化
- 优化"保存查询"弹窗布局，采用更合理的行式设计
  - 增加弹窗宽度，提供更宽敞的操作空间
  - 第一行放置查询名称和数据源
  - 第二行放置标签和查询类型
  - 第三行放置查询内容
  - 第四行放置备注说明
  - 整体排版更加美观，符合宽屏阅读习惯
- 精简查询编辑页面界面
  - 移除了顶部冗余的保存和执行按钮
  - 保留了收藏功能，便于用户快速收藏常用查询
  - 保留查询名称和版本信息
  - 减少界面元素重复，提高用户体验

### 修复
- 修复查询历史页分页显示问题
- 修复删除查询后分页计算错误的问题
- 解决执行查询后结果显示不完整的问题

## 2023-07-11

### 改进
- 查询历史页面现在会在组件挂载时自动加载数据
- 查询历史页面不再显示临时查询，只显示已保存的查询
  - 过滤掉名称以"临时查询:"开头或没有名称的查询
  - 分页显示和数据统计基于过滤后的数据

### 修复
- 修复了在 QueryEditor.vue 中对 undefined 或 null 值调用 trim() 方法导致的错误
  - 在 getExecuteButtonTooltip 函数中增加了空值检查
  - 在 canExecuteQuery 计算属性中增加了空值检查
  - 修复了 SaveQueryParams 中 id 字段类型不匹配的问题
- 修复了顶部导航中的路由问题，确保查询菜单项指向正确的历史页面
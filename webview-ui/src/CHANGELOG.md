# 更新日志

## [Unreleased]
### 新增
- 创建查询模块集成分支`feature/query-module-integration`
- 补充基础UI组件，包括：
  - Icon组件：支持自定义图标名称、大小和颜色
  - Button组件：支持多种样式、尺寸和状态
  - Modal组件：支持自定义标题、尺寸和关闭方式
  - Pagination组件：支持自定义页码显示和页面跳转
  - StatusBadge组件：支持不同状态的徽章显示
  - DateRangePicker组件：支持日期范围选择、预设时间段和自定义日期范围
- 开发简单消息服务，统一消息提示行为
- 初始化Vue 3项目框架，使用以下版本：
  - Vue 3.3.4
  - TypeScript 5.0.2
  - Vite 4.4.5

### 修复
- 修复DateRangePicker组件的命名冲突问题，解决TypeScript类型检查错误
- 修复SQL语法中的LIMIT语句，支持所有复杂SQL查询场景
- 全面修复查询计划分析功能，增强SQL性能分析能力
- 修复查询收藏和历史功能，改善查询管理体验
- 完成所有查询相关界面修复，确保前后端正确集成
- 优化环境变量配置，使API调用正确
- 统一前端API处理代码，适配标准化响应格式，包括：
  - 修改查询历史API响应从`history`字段为`items`字段
  - 统一查询计划和表数据预览API中的分页信息为`pagination`对象
  - 增强API响应格式兼容性，支持旧新格式平滑过渡
  - 增加对查询计划历史列表API的支持（`/api/queries/plans`）
- 完成查询模块API接口修复：
  - 修复查询导出功能（CSV、Excel、JSON格式）
  - 修正查询收藏功能，正确与后端API交互
  - 修复查询执行计划获取功能，增加错误处理和回退机制
  - 改进查询可视化功能，优化数据结构和错误处理
  - 修正查询优化建议功能，适配数据格式
  - 纠正API请求路径，确保所有请求正确发往后端服务
- 完成`getQueryHistory`方法的重写，实现更好的错误处理和日志记录，确保前端界面与后端API的兼容性
- 重新设计基础UI组件系统，以支持查询历史等模块的正确显示，包括Icon、Button、Modal等通用组件
- 优化分页逻辑，修复查询历史页面中的分页显示问题
- 修复查询历史列表显示问题，解决之前显示"暂无查询"的错误

### 变更
- 标准化API响应格式：
  - 所有返回数据数组的API都使用`items`字段
  - 所有分页信息统一为`pagination`对象
  - 保持向后兼容，确保旧代码仍能正常工作

## 项目更新日志

### 2024-04-01

#### 新增
- 补充基础UI组件：
  - Icon: 图标组件
  - Button: 按钮组件
  - Modal: 模态框组件
  - Pagination: 分页组件
  - StatusBadge: 状态徽章组件
  - DateRangePicker: 日期范围选择器

#### 修复
- **修复API URL路径重复问题**：修正getApiBaseUrl函数及所有API调用点，解决路径重复导致的404错误
- **改进查询详情页面404错误处理**：添加友好错误提示及返回按钮，提升用户体验
- **增强查询保存功能**：添加输入验证、错误处理和本地存储恢复机制，解决查询保存后无法访问的问题
- **修复DateRangePicker组件类型冲突**：解决QueryHistory组件中的TypeScript命名冲突问题，提高代码稳定性
- 优化查询历史展示，解决"暂无查询"显示问题
- 统一API响应格式处理逻辑，使用items字段代替history字段
- 添加错误处理和回退机制，提升用户体验
- 优化分页逻辑，修复分页跳转问题

#### 变更
- 重构API调用方式，确保URL路径正确拼接
- 使用统一的消息服务进行通知
- 更新项目文档，添加组件和API调用规范

### [版本未发布]

#### 改进

- 优化了集成预览页面卡片样式，确保表格视图与查询表单、图表视图等组件样式统一
- 解决了日期选择器本地化配置的问题，修复了locale方法调用错误

### [1.0.0] - 2023-07-15

#### 新增

- 集成预览页面完成
  - 支持表格视图
  - 支持图表视图
  - 支持查询条件过滤

#### 优化

- 更新组件库到最新版本
- 优化了布局和样式 
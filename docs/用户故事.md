# DataScope - 用户故事

## 数据源管理

1. **作为**系统管理员，**我希望**能够将新的数据源（MySQL/DB2）添加到系统中，**以便**用户可以访问和查询这些数据源中的数据。
   - 验收标准：
     - 支持MySQL和DB2数据库类型
     - 能够提供连接详情（主机、端口、凭据等）
     - 安全存储连接凭据并进行加密
     - 保存前提供测试连接功能

2. **作为**系统管理员，**我希望**查看所有已配置的数据源，**以便**我可以管理和监控它们。
   - 验收标准：
     - 列表视图显示所有数据源及其关键信息
     - 状态指示器显示连接健康状况
     - 搜索和筛选功能

3. **作为**系统管理员，**我希望**编辑或删除现有数据源，**以便**我可以维护准确的连接信息。
   - 验收标准：
     - 编辑所有连接参数
     - 可以禁用数据源而不删除它
     - 永久删除前需要确认

4. **作为**系统管理员，**我希望**触发数据源的元数据同步，**以便**系统拥有关于模式、表和列的最新信息。
   - 验收标准：
     - 手动同步触发选项
     - 同步过程中的进度指示器
     - 同步过程中所做更改的详细日志
     - 支持增量更新

5. **作为**系统管理员，**我希望**安排自动元数据同步，**以便**元数据无需手动干预即可保持最新状态。
   - 验收标准：
     - 可配置的计划（每日、每周等）
     - 同步失败的电子邮件通知
     - 每个数据源可启用/禁用计划同步的选项

## 智能数据发现和查询

6. **作为**用户，**我希望**浏览可用的数据源、模式、表和列，**以便**我可以了解有哪些数据可用。
   - 验收标准：
     - 层次导航界面
     - 跨所有元数据的搜索功能
     - 显示列数据类型和描述
     - 主键和索引的指示

7. **作为**用户，**我希望**针对选定的数据源创建SQL查询，**以便**我可以检索特定数据。
   - 验收标准：
     - 具有语法高亮的SQL编辑器
     - 模式/表/列自动完成
     - 查询执行并预览结果
     - 执行前的查询验证
     - 30秒后查询超时

8. **作为**用户，**我希望**使用自然语言描述我的数据需求，**以便**我可以在不编写SQL的情况下获取结果。
   - 验收标准：
     - 自然语言输入字段
     - 生成的SQL预览
     - 能够根据结果优化自然语言查询
     - 与LLM服务（OpenRouter）集成

9. **作为**用户，**我希望**保存查询以供将来使用，**以便**我不必重新创建它们。
   - 验收标准：
     - 使用名称和描述保存查询
     - 将查询组织到文件夹/类别中
     - 查询的版本控制
     - 与其他用户共享查询

10. **作为**用户，**我希望**查看我的查询历史记录，**以便**我可以参考以前的工作。
    - 验收标准：
      - 已执行查询的时间顺序列表
      - 按日期范围、数据源、成功/失败筛选
      - 能够重新运行历史查询
      - 保存历史查询的选项

11. **作为**用户，**我希望**将查询结果下载为CSV，**以便**我可以在其他工具中处理数据。
    - 验收标准：
      - 查询结果的CSV导出选项
      - 每次下载限制50,000行
      - 大型下载的进度指示器
      - 在CSV格式中正确处理各种数据类型

12. **作为**用户，**我希望**定义表之间的关系，**以便**系统可以生成更好的查询。
    - 验收标准：
      - 定义外键关系的界面
      - 已定义关系的可视化表示
      - 编辑或删除关系的能力
      - 关系定义的导入/导出

13. **作为**用户，**我希望**系统自动建议表之间的关系，**以便**我不必手动定义所有关系。
    - 验收标准：
      - 基于命名约定自动检测潜在关系
      - 从查询模式中学习以建议关系
      - 建议关系的置信度评分
      - 接受或拒绝建议的选项

## 低代码集成和应用程序开发

14. **作为**开发人员，**我希望**为我的查询创建API端点，**以便**它们可以被其他应用程序使用。
    - 验收标准：
      - 从保存的查询生成API
      - 动态查询的参数映射
      - API文档生成
      - API的版本控制
      - 速率限制配置

15. **作为**开发人员，**我希望**配置查询参数和结果的显示方式，**以便**它们能与低代码平台良好集成。
    - 验收标准：
      - 查询参数的表单配置
      - 结果显示配置（列、格式等）
      - 基于数据类型支持不同的UI组件类型
      - 配置的表单和结果预览

16. **作为**开发人员，**我希望**在查询结果中屏蔽敏感数据，**以便**我可以保护私人信息。
    - 验收标准：
      - 列级别的屏蔽配置
      - 多种屏蔽模式（部分显示、完全屏蔽等）
      - 所有界面中一致的屏蔽
      - 屏蔽数据访问的审计日志

17. **作为**开发人员，**我希望**系统根据数据类型建议显示配置，**以便**我可以快速创建有效的界面。
    - 验收标准：
      - 数据类型到UI组件的自动映射
      - 智能字段分组建议
      - 基于字段关系的布局建议
      - 覆盖建议的能力

18. **作为**用户，**我希望**配置显示哪些列以及如何格式化它们，**以便**我可以根据需要自定义视图。
    - 验收标准：
      - 列可见性切换
      - 列顺序配置
      - 不同数据类型的格式设置
      - 保存个人视图偏好

19. **作为**用户，**我希望**配置哪些查询参数是必需的，哪些是可选的，**以便**我可以控制查询行为。
    - 验收标准：
      - 每个参数的必需/可选设置
      - 默认值配置
      - 参数依赖规则
      - 不常用参数的"更多选项"部分

20. **作为**用户，**我希望**系统记住我经常使用的查询参数，**以便**常用筛选器易于访问。
    - 验收标准：
      - 跟踪参数使用频率
      - 自动提升常用参数
      - 用户特定的参数偏好
      - 使用统计重置选项

## 系统管理

21. **作为**系统管理员，**我希望**监控系统性能，**以便**我可以识别和解决瓶颈。
    - 验收标准：
      - 具有关键性能指标的仪表板
      - 查询执行时间统计
      - 资源利用率图表
      - 性能阈值的警报配置

22. **作为**系统管理员，**我希望**设置每个用户的查询速率限制，**以便**单个用户不会使系统过载。
    - 验收标准：
      - 可配置的查询速率限制
      - 用户特定的限制覆盖
      - 达到限制时的明确反馈
      - 渐进节流而非硬性切断

23. **作为**系统管理员，**我希望**查看系统活动日志，**以便**我可以排除问题。
    - 验收标准：
      - 可搜索的日志界面
      - 按日志级别、组件、用户等筛选
      - 导出日志以进行外部分析
      - 保留策略配置